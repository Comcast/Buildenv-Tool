---
vars:
  GLOBAL: "global"

secrets:
  #SECRET_TEST: "secret/test"

engines:
  - path: "aws/sts/backup"
    # method: "WRITE"
    args:
      ttl: "30m"
    vars:
      AWS_ACCESS_KEY_ID: "access_key"
      SECRET_ACCESS_KEY: "secret_key"
      AWS_SESSION_TOKEN: "security_token"

environments:
  prod:
    vars:
      ENVIRONMENT: "stage"

    secrets:
      #ANOTHER_SECRET: "secret/test2"

    dcs:
      aws:
        engines:
        - path: "aws/sts/backup"
          # method: "WRITE"
          args:
            ttl: "30m"
          vars:
            AWS_ACCESS_KEY_ID_STAGE: "access_key"
            SECRET_ACCESS_KEY_STAGE: "secret_key"
            AWS_SESSION_TOKEN_STAGE: "security_token"
        # - path: "database/postgres"
        #   vars:
        #     PG_USER: "username"
        #     PG_PASSWORD: "password"
        secrets:
        vars:
          BE_CLOUD: "aws"
          BE_DC: "one"
          BE_AWS_REGION: "eu-west-1"
          BE_AWS_ACCESS_KEY_ID: "secret/test3"
          BE_AWS_SECRET_ACCESS_KEY: ""

      hetzner:
        secrets:
        vars:
          CLOUD: "hetzner"
          DC: "one"
          HCLOUD_TOKEN: "secret/test3"
